<div ng-if="selectedIssue">
    <h3> {{ selectedIssue.title }} </h3>
    <hr>

    <div class="scrollable" ng-if="bestUsers">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="col-lg-1 col-md-1">
                        <a href="" ng-click="compare(true)" class="btn btn-default" ng-class="{disabled: selectedUsers.length < 2}">Compare</a>
                    </th>
                    <th class="col-lg-2 col-md-2">
                        Username
                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-cosine')">Cosine Score</a>
                        <i ng-if="parameter === '-cosine'" class="fa fa-caret-down" aria-hidden="true"></i>
                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-jaccard')">Jaccard Score</a>
                        <i ng-if="parameter === '-jaccard'" class="fa fa-caret-down" aria-hidden="true"></i>

                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-ssaZScore')">SSA Z Score</a>
                        <i ng-if="parameter === '-ssaZScore'" class="fa fa-caret-down" aria-hidden="true"></i>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in bestUsers | orderBy: [parameter, 'username']" ng-class="{success: user.assignee, 'bg-primary': user.selected}" ng-init="user.selected = false">
                    <td>
                        <input type="checkbox" ng-click="selectUser(user)">
                    </td>
                    <td>
                        <p>{{ user.username }}</p>
                        <small> Repos: </small>
                        <small ng-repeat="repo in user.repos">
                            {{repo}}
                        </small>
                    </td>
                    <td>
                        {{ user.cosine.toFixed(2) }}
                        <p class="pull-right badge" ng-if="parameter === '-cosine'">{{ $index + 1 }}</p>
                    </td>
                    <td>
                        {{ user.jaccard.toFixed(2) }}
                        <p class="pull-right badge" ng-if="parameter === '-jaccard'">{{ $index + 1 }}</p>
                    </td>
                    <td>
                        {{ user.ssaZScore.toFixed(2) }}
                        <p class="pull-right badge" ng-if="parameter === '-ssaZScore'">{{ $index + 1 }}</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <small>
        Green row = Assignee
    </small>
</div>

<script type="text/ng-template" id="compare-table">
    <div class="modal-header">
        <h3 class="modal-title">Comparison Table</h3>
    </div>
    <div class="modal-body">
        <table class="table table-bordered" >
            <thead>
                <tr>
                    <th class="col-lg-3 col-md-3">
                        Username
                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-cosine')">Cosine Score</a>
                        <i ng-if="parameter === '-cosine'" class="fa fa-caret-down" aria-hidden="true"></i>
                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-jaccard')">Jaccard Score</a>
                        <i ng-if="parameter === '-jaccard'" class="fa fa-caret-down" aria-hidden="true"></i>
                    </th>
                    <th class="col-lg-3 col-md-3">
                        <a href="" ng-click="sort('-ssaZScore')">SSA Z Score</a>
                        <i ng-if="parameter === '-ssaZScore'" class="fa fa-caret-down" aria-hidden="true"></i>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in users | orderBy: [parameter, 'username']">
                    <td>
                        <p>{{ user.username }}</p>
                        <small> Repos: </small>
                        <small ng-repeat="repo in user.repos">
                            {{repo}}
                        </small>
                    </td>
                    <td>
                        {{ user.cosine.toFixed(2) }}
                    </td>
                    <td>
                        {{ user.jaccard.toFixed(2) }}
                    </td>
                    <td>
                        {{ user.ssaZScore.toFixed(2) }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="modal-footer">
        <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
    </div>
</script>
